# GenshinLikeProject
## 1. :file_folder: 소개
 * "__HoYoverse__"에서 개발한 게임 "__원신__"에서 사용되는 캐릭터의 조작법과 기본 이동 방식(걷기, 달리기, 정지, 질주, 점프)을 구현하는 것을 목적으로 하는 프로젝트 입니다.
 * Youtube의 "**Genshin Impact Movement - Indie Wafflus**" 영상 시리즈를 보고 따라 구현하는 방식으로 진행하였습니다.
 * :calendar: 개발 기간: 2024-07-15 ~ 2024-08-10
<br/><br/>

## 2. :house_with_garden: 개발 환경
 * Unity 2022.3.7f1 LTS
 * URP
 * C#
 * Windows 10
<br/><br/>

## 3. :wrench: 사용 기술
 * Input System, Scriptable Object, Cinemachine
 * Design Pattern(State Pattern)
<br/><br/>

## 4. :computer: 구현 기능
 * 조작 및 입력
    * **Input System**을 사용하여 사용자의 입력에 따른 알맞은 행동을 하도록 설정
    * 각 상태에 따라 입력할 수 있는 키가 다르기 때문에, 상태가 전환 될 때마다 콜백 메소드를 추가 및 제거
      <br/><br/>
 * 상태
    * 각 상태의 기본이 되는 IState 인터페이스를 만들고, 이를 상속받아 실제로 사용할 상태를 구현
    * State machine 스크립트에서 상태 전환 기능을 담당하며, 전환이 이루어질 때마다 상태 별 Enter 및 Exit 메소드를 실행하도록 설정
      <br/><br/>
 * 이동
    * 기본적인 이동 방식(걷기, 달리기, 질주, 대쉬, 점프)와 파생되는 일부 상태(정지, 착지)를 구현
    * 이동에 필요한 데이터(이동 속도, 전환 속도 등)는 데이터 클래스로 따로 나누어 생성하고, 이를 종합적으로 관리하는 **Scriptable Object**를 생성하여 인스펙터 창에서 쉽게 접근 가능하도록 구현
      <br/><br/>
 * 카메라
    * **Cinemachine**을 활용하여 캐릭터를 중심으로 마우스 입력에 따라 회전하는 카메라를 설정
    * Zoom 기능의 경우, 마우스 휠 입력을 받아 작동하도록 스크립트를 통해서 구현
    * 특정 각도나 상황에 따라 카메라의 중심을 조정하는 기능(**Camera Recentering**) 구현
      <br/><br/>
 * 애니메이션
    * Mixamo에서 제공되는 모델 및 애니메이션을 사용
    * Animator에서는 Sub-State Machine을 활용하여 공중과 지상을 구분, 각 상태에 맞는 전환 조건을 설정하고 스크립트를 통해 해당 조건을 활성화
    * 일부 상태 전환의 경우, 애니메이션의 특정 프레임에서 event를 작동 시켜 이에 따른 메소드를 수행하도록 설정
    * 애니메이션을 담당하는 모델링 오브젝트가 기본적인 상태 전환 스크립트를 가진 오브젝트의 하위 오브젝트이기 때문에, 애니메이션 event로 실제 기능을 수행할 수 있게 연결하는 스크립트 구현
 
<br/><br/>
## :thought_balloon: 5. 학습 후기
 * 지금까지 여러 강의 및 책을 통해 공부하면서 State Machine을 몇 번 구현한 경험이 있으나, 대부분 Enum형식으로 state를 선언하고 switch나 if문을 통해 각 state의 분기에 따른 기능을 실행하는 방식으로 구현하였다.
   이번에 진행한 프로젝트에서는 Interface및 Class를 적극적으로 활용하여 각 상태와 State machine을 구현하였으며, 기존 방식과 다르게 상태 전환에 따라 Enter, Exit 등의 메소드를 직접 지정하여 구현할 수 있고 새로운 상태를 추가할 때 재사용이 가능한 등의 장점이 존재한다고 생각된다.
   허나 실제 구현하는데 있어서 전자에 비해 복잡하기 때문에, 본인의 프로젝트 크기에 따라 적절한 방식을 선택할 필요가 있다고 생각됨<br/><br/>
 * 본 영상 시리즈에서는 기본 이동 방식 중, 활공 및 수영에 대한 구현에 대해서는 다루지 않았다. 하지만 해당 상태들 또한 본 영상에서 구현한 상태들과 큰 차이는 없기에 유사한 방식으로 구현하는 것이 가능하다고 생각된다.
   Ex) 활공과 수영 상태로 전환되는 조건을 지정, 활공 상태(캐릭터에 가해지는 중력 값 조정, 조작 방식을 입력한 방향으로 선회하는 방식으로 수정), 수영 상태(레이어와 콜라이더를 통해 캐릭터가 위치한 지역이 수중인지 확인, 수영 상태에 맞는 이동 방식으로 변경)<br/><br/>
 * 해당 영상에서는 Rigidbody를 활용해 이동 및 물리 작용을 구현함. 허나 실제 "__원신__"에서는 캐릭터와 다른 오브젝트 간의 물리적인 상호작용이 구체적일 필요가 없기에 Rigidbody를 사용하는 방식이 비교적 간단할 수 는 있으나, 실제로 사용하지 않는 물리 속성(마찰, 각 운동량 등)이 존재하는 등 단점 
   이 존재하여 Rigidbody를 통해 구현 할 필요성이 떨어짐. 만약 실제 게임을 위해 구현한다면 다른 방식으로 구현 할 필요가 있다고 생각됨<br/><br/>
<br/><br/>
 참고 영상 : **Genshin Impact Movement - Indie Wafflus** (https://www.youtube.com/playlist?list=PL0yxB6cCkoWKuPoh_9dSvdItQENVx7YTW)
